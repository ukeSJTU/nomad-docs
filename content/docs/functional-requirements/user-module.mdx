---
title: 3.1 用户模块
description: 用户注册、登录、个人信息管理等
icon: User
---

### 3.1.1 用户注册 (User Registration)

#### 1. 功能概述 (Feature Overview)

本功能允许新用户通过一个**两步流程**创建个人账户：

- 第一步，通过手机号或邮箱和（模拟/真实的）短信验证码进行身份验证；
- 第二步，设置账户密码；
- 第三部，提示注册流程成功，进行后续操作。

同时，用户也可以通过GitHub第三方授权快速完成注册。

成功注册是用户进行机票预订、管理订单等所有核心操作的前提。

#### 2. 优先级 (Priority)
- **MoSCoW 评级:** Must Have

#### 3. 用户故事 (User Stories)

- **US-01:** 作为一个**新访客**，我希望**能使用我的手机号和密码注册一个账户**，以便**能够预订机票和管理我的个人信息**。
- **US-02:** 作为一个**拥有GitHub账户的新访客**，我希望**能通过GitHub一键授权来创建账户**，以便**跳过繁琐的表单填写，快速开始使用平台**。
- **US-03:** 作为一个**按照流程注册完成的访客**，我希望**能快速跳转到需要访问的页面**，以便**更好的使用体验**。
- **US-04:** 作为一个**网站运营者**，我希望**在发送短信验证码前进行人机验证**，以便**保护短信接口不被恶意程序攻击，节约成本**。

#### 4. 验收标准 (Acceptance Criteria)

**场景1: 用户成功完成两步注册 (Happy Path)**
- **Given** 用户位于注册流程第一步（手机/邮箱验证页），且未登录
- **And** 用户输入了有效的、未被注册的手机号/邮箱地址，并通过了人机验证
- **And** 用户勾选了“同意用户协议”
- **When** 用户获取并输入了正确的验证码，并点击“下一步”
- **Then** 系统应验证通过，并将用户引导至注册流程第二步（设置密码页）
- **And** 当用户在第二步输入符合强度要求的密码和确认密码
- **When** 用户点击“完成注册”按钮
- **Then** 系统应成功创建新账户，将用户引导至注册流程第三步，并给用户提供跳转至登录页或CallbackURL或直接登录进入个人中心的链接

**场景2: 人机验证**
- **Given** 用户位于注册流程第一步
- **When** 用户未通过人机验证就点击“获取验证码”
- **Then** “获取验证码”按钮应不可点击或提示“请先完成安全验证”

**场景3: 手机号/邮箱已被注册**
- **Given** 用户位于注册流程第一步
- **When** 用户输入一个已经被注册的手机号/邮箱并点击“获取验证码”或“注册”
- **Then** 系统应提示“该手机号/邮箱已被注册”，并阻止后续流程同时提供“去登录”的链接

**场景4: 短信验证码错误或无效**
- **Given** 用户位于注册流程第一步并已收到（模拟的）短信验证码
- **When** 用户输入了无效的（错误或过期）的验证码并点击“下一步”
- **Then** 系统应提示“验证码错误或已失效”，允许用户重新获取，并让用户停留在第一步

**场景5: 用户未同意用户协议**
- **Given** 用户填写了所有必填信息
- **When** 用户点击“注册”按钮但未勾选“同意用户协议”
- **Then** 系统应提示“请先阅读并同意用户协议”，注册流程不应继续

**场景6: 设置密码时不一致**
- **Given** 用户位于注册流程第二步
- **When** 用户输入的“密码”与“确认密码”不一致并点击“完成注册”
- **Then** 系统应提示“两次输入的密码不一致”，并让用户停留在第二步

**场景7: 用户通过GitHub成功注册 (Happy Path)**
- **Given** 用户位于注册/登录页面，且其GitHub账户的邮箱未在本平台注册
- **When** 用户点击“通过GitHub注册/登录”并成功完成授权
- **Then** 系统应使用其GitHub信息（用户名、头像）自动创建平台账户，并让用户进入登录状态

**场景8: GitHub账户的邮箱已经在本平台注册**
- **Given** 一个GitHub账户的邮箱地址 `user@example.com` 已经在平台注册
- **When** 该用户尝试通过此GitHub账户进行授权注册
- **Then** 系统应提示“该GitHub账户已关联平台现有账户，请直接登录”并提供一个快捷登录按钮

#### 5. UI与交互设计简述 (UI/UX Notes)

采用三步式向导界面：

##### 整体页面布局
- **所需UI元素:**
    - 步骤指示器

##### 第一步：验证手机号/邮箱

- **所需UI元素:**
    - 手机号输入框
    - “获取验证码”按钮
    - 验证码输入框
    - “我已阅读并同意《用户协议》”的复选框及协议链接
    - 人机验证组件（可以是隐藏的）
    - “下一步”按钮
    - “已有账户？去登录”的链接
    - 分割线或文字提示“其他方式注册”
    - “通过GitHub登录”按钮
- **关键交互:**
    - 点击“获取验证码”后，后台立刻进行人机验证/弹出人机验证窗口。
    - 人机验证通过后，“获取验证码”按钮变为禁用状态并显示60秒倒计时；倒计时结束后恢复可用。

##### 第二步：设置密码

- **所需UI元素:**
    - 注册手机号/邮箱提示文本
    - 密码输入框（带强度提示和可见性切换）
    - 确认密码输入框
    - “完成注册”按钮
    - “返回上一步”按钮
- **关键交互:**
    - 实时校验两次输入的密码是否一致。
    - 密码输入时，实时显示密码强度（弱、中、强）。
    - 可以点击“返回上一步”按钮

##### 第三步：注册完成

- **所需UI元素:**
    - 注册成功信息
    - 快速跳转链接一：指向用户重定向URL（默认首页）
    - 快速跳转链接二：指向用户管理信息后台
- **关键交互:**
    - 如果用户在非登录、无账户状态下被重定向到这个注册流程页面，则在流程结束后应该能够返回之前访问的页面